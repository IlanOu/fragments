/* ------------------ NPCMovementDance ------------------ */
using UnityEngine;
using NPC.NPCAnimations;

class NPCMovementDance : NPCMovementStrategy
{
    private readonly float danceDuration;
    private float timer   = 0f;
    private bool  launched = false;

    public NPCMovementDance(NPCMovement npcMovement, float duration = 3f)
        : base(npcMovement)
    {
        danceDuration = duration;        // durée de la danse en secondes
    }

    public override void StartMovement()
    {
        if (launched) return;
        launched = true;
        timer    = 0f;

        // Déclenche la danse (Trigger)
        NPCAnimBus.Bool(npcMovement.Manager.gameObject, NPCAnimationsType.Dance);
    }

    public override bool IsDone
    {
        get
        {
            if (!launched) return false;

            timer += Time.deltaTime;
            if (timer >= danceDuration)
            {
                launched = false;         // rien d’autre à couper (trigger se reset tout seul)
                return true;
            }
            return false;
        }
    }
}